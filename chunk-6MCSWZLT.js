import{a as Ae,b as Fe,c as Le}from"./chunk-KOUVDOUP.js";import{a as ge}from"./chunk-UWH7GB7O.js";import{g as Pe}from"./chunk-J4PD7BZK.js";import{a as He}from"./chunk-OFD7EYDZ.js";import{a as Te}from"./chunk-RIFBI5MV.js";import{a as fe,b as ze}from"./chunk-DIQ2LD33.js";import"./chunk-BNGXIIFR.js";import{b as w}from"./chunk-T5R5F755.js";import"./chunk-2DAQWK53.js";import{b as ye}from"./chunk-Q5NZRL2J.js";import{d as ke,e as Ee,f as We,g as Ve,h as De,i as $e,j as Oe,k as Me,l as Ne}from"./chunk-WWBJZRB3.js";import"./chunk-JDVBVFYV.js";import{c as me,e as he,i as xe,j as be,k as ue,m as Ce}from"./chunk-T3OMKPNY.js";import{a as Ie,e as Se}from"./chunk-UWR5UOR2.js";import"./chunk-2E2HDFN4.js";import"./chunk-CNF4J47Z.js";import{i as de}from"./chunk-FZ6UWWUS.js";import"./chunk-S33ID6BD.js";import{b as ve}from"./chunk-2MFTSG6V.js";import{$b as se,Qb as oe,Rb as ae,Tb as re,Ub as le,aa as R,ca as J,cc as ce,ea as g,ia as ie,mc as _e,nc as pe,rc as we,ua as S}from"./chunk-IRNLUXZ3.js";import{$d as X,Ac as F,Ca as m,Cb as A,Da as h,Fd as j,Gd as D,Hd as K,Ib as b,Ic as L,Id as G,Jd as Y,Kd as q,Md as Q,Ob as c,Qb as k,a as I,ac as a,bc as r,be as Z,cc as v,de as $,f as Ue,g as V,gc as C,jc as d,ke as E,lc as p,le as O,me as ee,nb as P,oe as te,pd as B,pe as ne,qb as i,qd as U,qe as M,se as u,vb as y,xc as _,yc as x,yd as H,zc as f}from"./chunk-CNDRISKB.js";var Be=Ue(He(),1);var Re=s=>({count:s});function Je(s,n){if(s&1){let e=C();a(0,"button",9),d("click",function(){m(e);let t=p();return h(t.handleSync())}),_(1),r()}if(s&2){let e=p();c("nzLoading",e.syncLoading),i(),f(" ",e.$t("_save")," ")}}function je(s,n){if(s&1){let e=C();a(0,"button",10),d("click",function(){m(e);let t=p();return h(t.handleReset())}),_(1),r()}if(s&2){let e=p();i(),f(" ",e.$t("_resetInitData")," ")}}function Ke(s,n){s&1&&v(0,"i",42)}function Ge(s,n){if(s&1){let e=C();a(0,"tr")(1,"td",36),d("nzCheckedChange",function(t){let l=m(e).$implicit,z=p(2);return h(z.onItemChecked(l.id,t))}),r(),a(2,"td",37)(3,"a",38),d("click",function(){let t=m(e).index,l=p(2);return h(l.moveOneUp(t))}),_(4),r(),a(5,"a",39),d("click",function(){let t=m(e).index,l=p(2);return h(l.moveOneDown(t))}),_(6),r(),a(7,"a",39),d("click",function(){let t=m(e).$implicit,l=p(2);return h(l.openEditClass(t))}),_(8),r()(),a(9,"td"),v(10,"app-logo",40),r(),a(11,"td"),_(12),r(),a(13,"td"),b(14,Ke,1,0,"i",41),r()()}if(s&2){let e=n.$implicit,o=n.index,t=p(2);i(),c("nzChecked",t.setOfCheckedId.has(e.id)),i(2),k("invisible",o===0),i(),x(t.$t("_moveUp")),i(2),x(t.$t("_moveDown")),i(2),x(t.$t("_edit")),i(2),c("src",e.icon)("name",e.title),i(2),x(e.title),i(2),c("ngIf",e.ownVisible)}}function Ye(s,n){if(s&1&&v(0,"nz-option",43),s&2){let e=n.$implicit;c("nzLabel",e.title)("nzValue",e.id)}}function qe(s,n){s&1&&v(0,"i",42)}function Qe(s,n){if(s&1){let e=C();a(0,"tr")(1,"td",36),d("nzCheckedChange",function(t){let l=m(e).$implicit,z=p(2);return h(z.onItemChecked(l.id,t))}),r(),a(2,"td",37)(3,"a",38),d("click",function(){let t=m(e).index,l=p(2);return h(l.moveTwoUp(t))}),_(4),r(),a(5,"a",39),d("click",function(){let t=m(e).index,l=p(2);return h(l.moveTwoDown(t))}),_(6),r(),a(7,"a",39),d("click",function(){let t=m(e).$implicit,l=p(2);return h(l.openEditClass(t))}),_(8),r(),a(9,"a",39),d("click",function(){let t=m(e).$implicit,l=p(2);return h(l.openMoveWebModal(t,2))}),_(10),r()(),a(11,"td"),v(12,"app-logo",40),r(),a(13,"td"),_(14),r(),a(15,"td"),b(16,qe,1,0,"i",41),r()()}if(s&2){let e=n.$implicit,o=n.index,t=p(2);i(),c("nzChecked",t.setOfCheckedId.has(e.id)),i(2),k("invisible",o===0),i(),x(t.$t("_moveUp")),i(2),x(t.$t("_moveDown")),i(2),x(t.$t("_edit")),i(2),x(t.$t("_move")),i(2),c("src",e.icon)("name",e.title),i(2),x(e.title),i(2),c("ngIf",e.ownVisible)}}function Xe(s,n){if(s&1&&v(0,"nz-option",43),s&2){let e=n.$implicit;c("nzLabel",e.title)("nzValue",e.id)}}function Ze(s,n){if(s&1&&v(0,"nz-option",43),s&2){let e=n.$implicit;c("nzLabel",e.title)("nzValue",e.id)}}function et(s,n){s&1&&v(0,"i",42)}function tt(s,n){if(s&1){let e=C();a(0,"tr")(1,"td",36),d("nzCheckedChange",function(t){let l=m(e).$implicit,z=p(2);return h(z.onItemChecked(l.id,t))}),r(),a(2,"td",37)(3,"a",38),d("click",function(){let t=m(e).index,l=p(2);return h(l.moveThreeUp(t))}),_(4),r(),a(5,"a",39),d("click",function(){let t=m(e).index,l=p(2);return h(l.moveThreeDown(t))}),_(6),r(),a(7,"a",39),d("click",function(){let t=m(e).$implicit,l=p(2);return h(l.openEditClass(t))}),_(8),r(),a(9,"a",39),d("click",function(){let t=m(e).$implicit,l=p(2);return h(l.openMoveWebModal(t,3))}),_(10),r()(),a(11,"td"),v(12,"app-logo",40),r(),a(13,"td"),_(14),r(),a(15,"td"),b(16,et,1,0,"i",41),r()()}if(s&2){let e=n.$implicit,o=n.index,t=p(2);i(),c("nzChecked",t.setOfCheckedId.has(e.id)),i(2),k("invisible",o===0),i(),x(t.$t("_moveUp")),i(2),x(t.$t("_moveDown")),i(2),x(t.$t("_edit")),i(2),x(t.$t("_move")),i(2),c("src",e.icon)("name",e.title),i(2),x(e.title),i(2),c("ngIf",e.ownVisible)}}function nt(s,n){if(s&1&&v(0,"nz-option",43),s&2){let e=n.$implicit;c("nzLabel",e.title)("nzValue",e.id)}}function it(s,n){if(s&1&&v(0,"nz-option",43),s&2){let e=n.$implicit;c("nzLabel",e.title)("nzValue",e.id)}}function ot(s,n){if(s&1&&v(0,"nz-option",43),s&2){let e=n.$implicit;c("nzLabel",e.title)("nzValue",e.id)}}function at(s,n){if(s&1){let e=C();a(0,"div")(1,"a",38),d("click",function(){m(e);let t=p().index,l=p(2);return h(l.moveWebUp(t))}),_(2),r()()}if(s&2){let e=p().index,o=p(2);i(),k("invisible",e===0),i(),x(o.$t("_moveUp"))}}function rt(s,n){if(s&1){let e=C();a(0,"div")(1,"a",38),d("click",function(){m(e);let t=p().index,l=p(2);return h(l.moveWebDown(t))}),_(2),r()()}if(s&2){let e=p(3);i(2),x(e.$t("_moveDown"))}}function lt(s,n){if(s&1){let e=C();a(0,"div")(1,"a",38),d("click",function(){m(e);let t=p().$implicit,l=p(2);return h(l.openMoveWebModal(t))}),_(2),r()()}if(s&2){let e=p(3);i(2),x(e.$t("_move"))}}function st(s,n){s&1&&v(0,"span",51)}function ct(s,n){if(s&1&&v(0,"app-logo",40),s&2){let e=p().$implicit;c("src",e.icon)("name",e.name)}}function _t(s,n){if(s&1&&v(0,"tag-list",52),s&2){let e=p().$implicit;c("data",e.tags)}}function pt(s,n){s&1&&v(0,"i",42)}function dt(s,n){if(s&1){let e=C();a(0,"tr")(1,"td",36),d("nzCheckedChange",function(t){let l=m(e).$implicit,z=p(2);return h(z.onItemChecked(l.id,t))}),r(),a(2,"td",44),b(3,at,3,3,"div",45)(4,rt,3,1,"div",45),a(5,"a",38),d("click",function(){let t=m(e).$implicit,l=p(2);return h(l.openEditWebModal(t))}),_(6),r(),b(7,lt,3,1,"div",45),r(),a(8,"td"),b(9,st,1,0,"span",46),r(),a(10,"td"),b(11,ct,1,2,"app-logo",47),r(),a(12,"td")(13,"a",48),_(14),r()(),a(15,"td"),b(16,_t,1,1,"tag-list",49),r(),a(17,"td"),b(18,pt,1,0,"i",41),r(),a(19,"td")(20,"pre",50),_(21),r()(),a(22,"th",35),_(23),r()()}if(s&2){let e=n.$implicit,o=p(2);i(),c("nzChecked",o.setOfCheckedId.has(e.id)),i(2),c("ngIf",o.errorWebs.length<=0),i(),c("ngIf",o.errorWebs.length<=0),i(2),x(o.$t("_edit")),i(),c("ngIf",o.errorWebs.length<=0),i(2),c("ngIf",e.ok===!1),i(2),c("ngIf",e.icon),i(2),c("href",e.url,P),i(),x(e.name),i(2),c("ngIf",e.tags),i(2),c("ngIf",e.ownVisible),i(3),x(e.desc),i(2),x(e.breadcrumb)}}function mt(s,n){if(s&1){let e=C();a(0,"nz-tabset",11),d("nzSelectedIndexChange",function(t){m(e);let l=p();return h(l.onTabChange(t))}),a(1,"nz-tab",12)(2,"button",13),d("click",function(){m(e);let t=p();return h(t.openCreateClass())}),_(3),r(),a(4,"button",14),d("click",function(){m(e);let t=p();return h(t.onBatchDelete())}),_(5),r(),a(6,"nz-table",15,0)(9,"thead")(10,"tr")(11,"th",16),d("nzCheckedChange",function(t){m(e);let l=p();return h(l.onCheckAll(t))}),_(12),r(),a(13,"th",17),_(14),r(),a(15,"th",18),_(16),r(),a(17,"th",17),_(18),r(),a(19,"th",18),_(20),r()()(),a(21,"tbody"),b(22,Ge,15,10,"tr",19),r()()(),a(23,"nz-tab",12)(24,"nz-select",20),d("ngModelChange",function(t){m(e);let l=p();return h(l.hanldeOneSelect(t))}),b(25,Ye,1,2,"nz-option",21),r(),a(26,"button",22),d("click",function(){m(e);let t=p();return h(t.openCreateClass())}),_(27),r(),a(28,"button",14),d("click",function(){m(e);let t=p();return h(t.onBatchDelete())}),_(29),r(),a(30,"nz-table",15,0)(33,"thead")(34,"tr")(35,"th",16),d("nzCheckedChange",function(t){m(e);let l=p();return h(l.onCheckAll(t))}),_(36),r(),a(37,"th",17),_(38),r(),a(39,"th",18),_(40),r(),a(41,"th",17),_(42),r(),a(43,"th",18),_(44),r()()(),a(45,"tbody"),b(46,Qe,17,11,"tr",19),r()()(),a(47,"nz-tab",12)(48,"nz-select",23),d("ngModelChange",function(t){m(e);let l=p();return h(l.hanldeOneSelect(t))}),b(49,Xe,1,2,"nz-option",21),r(),a(50,"nz-select",24),d("ngModelChange",function(t){m(e);let l=p();return h(l.hanldeTwoSelect(t))}),b(51,Ze,1,2,"nz-option",21),r(),a(52,"button",22),d("click",function(){m(e);let t=p();return h(t.openCreateClass())}),_(53),r(),a(54,"button",14),d("click",function(){m(e);let t=p();return h(t.onBatchDelete())}),_(55),r(),a(56,"nz-table",15,0)(59,"thead")(60,"tr")(61,"th",16),d("nzCheckedChange",function(t){m(e);let l=p();return h(l.onCheckAll(t))}),_(62),r(),a(63,"th",17),_(64),r(),a(65,"th",18),_(66),r(),a(67,"th",17),_(68),r(),a(69,"th",18),_(70),r()()(),a(71,"tbody"),b(72,tt,17,11,"tr",19),r()()(),a(73,"nz-tab",12)(74,"nz-select",25),d("ngModelChange",function(t){m(e);let l=p();return h(l.hanldeOneSelect(t))}),b(75,nt,1,2,"nz-option",21),r(),a(76,"nz-select",26),d("ngModelChange",function(t){m(e);let l=p();return h(l.hanldeTwoSelect(t))}),b(77,it,1,2,"nz-option",21),r(),a(78,"nz-select",26),d("ngModelChange",function(t){m(e);let l=p();return h(l.hanldeThreeSelect(t))}),b(79,ot,1,2,"nz-option",21),r(),a(80,"button",27),d("click",function(){m(e);let t=p();return h(t.openCreateWebModal())}),_(81),r(),a(82,"button",28),d("click",function(){m(e);let t=p();return h(t.onBatchDelete())}),_(83),r(),a(84,"button",29),d("click",function(){m(e);let t=p();return h(t.getErrorWebs())}),_(85),r(),a(86,"nz-table",15,0)(89,"thead")(90,"tr")(91,"th",30),d("nzCheckedChange",function(t){m(e);let l=p();return h(l.onCheckAll(t))}),_(92),r(),a(93,"th",31),_(94),r(),a(95,"th",32),_(96),r(),a(97,"th",33),_(98),r(),a(99,"th",18),_(100),r(),a(101,"th",18),_(102),r(),a(103,"th",34),_(104),r(),a(105,"th",35),_(106),r(),a(107,"th",35),_(108),r()()(),a(109,"tbody"),b(110,dt,24,13,"tr",19),r()()()()}if(s&2){let e=p();c("nzSelectedIndex",e.tabActive),i(),c("nzTitle",e.$t("_mgr1")),i(2),f(" ",e.$t("_addTag")," "),i(),c("disabled",e.setOfCheckedId.size<=0),i(),f(" ",e.$t("_batchDel")," "),i(),c("nzData",e.navs())("nzShowPagination",!1),i(5),c("nzChecked",e.checkedAll),i(),f(" (",e.setOfCheckedId.size,") "),i(2),x(e.$t("_action")),i(2),x(e.$t("_icon")),i(2),x(e.$t("_tagName")),i(2),x(e.$t("_onlyOwnVisible")),i(2),c("ngForOf",e.navs()),i(),c("nzTitle",e.$t("_mgr2")),i(),c("ngModel",e.oneSelect)("nzPlaceHolder",e.$t("_sel1")),i(),c("ngForOf",e.navs()),i(2),f(" ",e.$t("_addTag")," "),i(),c("disabled",e.setOfCheckedId.size<=0),i(),f(" ",e.$t("_batchDel")," "),i(),c("nzData",e.twoTableData)("nzShowPagination",!1),i(5),c("nzChecked",e.checkedAll),i(),f(" (",e.setOfCheckedId.size,") "),i(2),x(e.$t("_action")),i(2),x(e.$t("_icon")),i(2),x(e.$t("_tagName")),i(2),x(e.$t("_onlyOwnVisible")),i(2),c("ngForOf",e.twoTableData),i(),c("nzTitle",e.$t("_mgr3")),i(),c("ngModel",e.oneSelect)("nzPlaceHolder",e.$t("_sel1")),i(),c("ngForOf",e.navs()),i(),c("ngModel",e.twoSelect)("nzPlaceHolder",e.$t("_sel2")),i(),c("ngForOf",e.twoTableData),i(2),f(" ",e.$t("_addTag")," "),i(),c("disabled",e.setOfCheckedId.size<=0),i(),f(" ",e.$t("_batchDel")," "),i(),c("nzData",e.threeTableData)("nzShowPagination",!1),i(5),c("nzChecked",e.checkedAll),i(),f(" (",e.setOfCheckedId.size,") "),i(2),x(e.$t("_action")),i(2),x(e.$t("_icon")),i(2),x(e.$t("_tagName")),i(2),x(e.$t("_onlyOwnVisible")),i(2),c("ngForOf",e.threeTableData),i(),c("nzTitle",e.$t("_mgrWeb")+"\uFF08"+e.internal.loginViewCount+"\uFF09"),i(),c("ngModel",e.oneSelect)("nzPlaceHolder",e.$t("_sel1")),i(),c("ngForOf",e.navs()),i(),c("ngModel",e.twoSelect)("nzPlaceHolder",e.$t("_sel2")),i(),c("ngForOf",e.twoTableData),i(),c("ngModel",e.threeSelect)("nzPlaceHolder",e.$t("_sel3")),i(),c("ngForOf",e.threeTableData),i(2),F(" ",e.$t("_addWeb"),"\uFF08",e.websiteTableData.length,"\uFF09 "),i(),c("disabled",e.setOfCheckedId.size<=0),i(),f(" ",e.$t("_batchDel")," "),i(2),f(" ",e.$t("_getErrorWeb")," "),i(),c("nzData",e.websiteTableData)("nzShowPagination",!1),i(5),c("nzChecked",e.checkedAll),i(),f(" (",e.setOfCheckedId.size,") "),i(2),x(e.$t("_action")),i(2),x(e.$t("_status")),i(2),x(e.$t("_icon")),i(2),x(e.$t("_webName")),i(2),x(e.$t("_associatedLabels")),i(2),x(e.$t("_onlyOwnVisible")),i(2),x(e.$t("_webDesc")),i(2),x(e.$t("_webTag")),i(2),c("ngForOf",e.websiteTableData)}}var N=class s{constructor(n,e,o,t){this.modal=n;this.notification=e;this.message=o;this.commonService=t}$t=u;isSelfDevelop=$;internal=te();settings=E();gitRepoUrl=j.gitRepoUrl;isLogin=Z;navs=ne;showCreateModal=!1;syncLoading=!1;uploading=!1;tabActive=0;oneSelect=-1;twoSelect=-1;threeSelect=-1;checkedAll=!1;setOfCheckedId=new Set;errorWebs=[];ngOnInit(){}get oneIndex(){return this.navs().findIndex(n=>n.id===this.oneSelect)}get twoIndex(){try{return this.twoTableData.findIndex(n=>n.id===this.twoSelect)}catch{return-1}}get threeIndex(){try{return this.threeTableData.findIndex(n=>n.id===this.threeSelect)}catch{return-1}}get twoTableData(){try{return this.navs().find(n=>n.id===this.oneSelect)?.nav||[]}catch{return[]}}get threeTableData(){try{return this.twoTableData.find(n=>n.id===this.twoSelect)?.nav||[]}catch{return[]}}get websiteTableData(){try{let n=this.threeTableData.find(e=>e.id===this.threeSelect);return n?n.nav:this.errorWebs}catch{return this.errorWebs}}getErrorWebs(){this.oneSelect=-1,this.twoSelect=-1,this.threeSelect=-1,this.onTabChange();let n=[];function e(o){if(Array.isArray(o))for(let t=0;t<o.length;t++){let l=o[t];l.url&&l.ok===!1?n.push(l):e(l.nav)}}e(this.navs()),this.errorWebs=n,n.length<=0?this.message.success("No error!"):this.message.warning(`\u68C0\u6D4B\u51FA ${n.length} \u4E2A\u7F51\u7AD9\u7591\u4F3C\u5F02\u5E38`)}onCheckAll(n){this.setOfCheckedId.clear(),this.checkedAll=n,[this.navs(),this.twoTableData,this.threeTableData,this.websiteTableData][this.tabActive].forEach(o=>{n?this.setOfCheckedId.add(o.id):this.setOfCheckedId.delete(o.id)})}onItemChecked(n,e){e?this.setOfCheckedId.add(n):this.setOfCheckedId.delete(n)}onBatchDelete(){return V(this,null,function*(){switch(this.tabActive){case 0:case 1:case 2:g.emit("DELETE_MODAL",{ids:[...this.setOfCheckedId],isClass:!0,onComplete:()=>{this.onTabChange()}});break;case 3:g.emit("DELETE_MODAL",{ids:[...this.setOfCheckedId],ok:()=>{this.errorWebs.length&&this.getErrorWebs()},onComplete:()=>{this.onTabChange()}});break}})}handleReset(){this.modal.info({nzTitle:u("_resetInitData"),nzContent:u("_warnReset"),nzOnOk:()=>{this.message.success(u("_actionSuccess")),window.localStorage.removeItem(Q.DATE_TIME),X().finally(()=>{window.location.reload()})}})}handleDownloadBackup(){let n={db:this.navs(),settings:E(),tag:ee(),search:O(),component:M()};(0,Be.saveAs)(new Blob([JSON.stringify(n)],{type:"text/plain;charset=utf-8"}),"nav.json")}handleUploadBackup(n){let e=this,o=n.target.files;if(o.length<=0)return;let t=o[0],l=new FileReader;l.readAsText(t),l.onload=function(z){return V(this,null,function*(){try{let{result:W}=z.target,T=JSON.parse(W);try{yield S({message:"import db",content:JSON.stringify(T.db),path:D,refresh:!1}),e.notification.success("OK","DB import successful")}catch{e.notification.error("Error","DB import failed",{nzDuration:0})}try{yield S({message:"import settings",content:JSON.stringify(I(I({},E),T.settings)),path:G,refresh:!1}),e.notification.success("OK","settings import successful")}catch{e.notification.error("Error","settings import failed",{nzDuration:0})}try{yield S({message:"import tag",content:JSON.stringify(T.tag),path:K,refresh:!1}),e.notification.success("OK","tag import successful")}catch{e.notification.error("Error","tag import failed",{nzDuration:0})}try{yield S({message:"import search",content:JSON.stringify(I(I({},O()),T.search)),path:Y,refresh:!1}),e.notification.success("OK","search import successful")}catch{e.notification.error("Error","search import failed",{nzDuration:0})}try{yield S({message:"import component",content:JSON.stringify(I(I({},M),T.component)),path:q,refresh:!1}),e.notification.success("OK","component import successful")}catch{e.notification.error("Error","component import failed",{nzDuration:0})}$?setTimeout(()=>{location.reload()},2e3):e.message.success(u("_syncSuccessTip"))}catch(W){e.notification.error(u("_error"),W.message)}finally{n.target.value=""}})}}goBack(){history.go(-1)}openMoveWebModal(n,e){g.emit("MOVE_WEB",{id:n.id,data:[n],level:e})}openCreateWebModal(){if(this.tabActive===3&&this.threeSelect===-1)return this.message.error(u("_sel3"));g.emit("CREATE_WEB",{parentId:this.threeSelect})}openEditWebModal(n){g.emit("CREATE_WEB",{detail:n})}onTabChange(n){this.errorWebs=[],this.tabActive=n??this.tabActive,this.setOfCheckedId.clear(),this.checkedAll=!1}moveOneUp(n){if(n===0)return;let e=this.navs()[n],o=this.navs()[n-1];this.navs.update(t=>(t[n-1]=e,t[n]=o,w(t),t))}moveOneDown(n){if(n===this.navs.length-1)return;let e=this.navs()[n],o=this.navs()[n+1];this.navs.update(t=>(t[n+1]=e,t[n]=o,w(t),t))}moveTwoUp(n){try{if(n===0)return;let e=this.navs()[this.oneIndex].nav[n],o=this.navs()[this.oneIndex].nav[n-1];this.navs.update(t=>(t[this.oneIndex].nav[n-1]=e,t[this.oneIndex].nav[n]=o,w(t),t))}catch(e){this.notification.error(u("_error"),e.message)}}moveTwoDown(n){try{if(n===this.navs()[this.oneIndex].nav.length-1)return;let e=this.navs()[this.oneIndex].nav[n],o=this.navs()[this.oneIndex].nav[n+1];this.navs.update(t=>(t[this.oneIndex].nav[n+1]=e,t[this.oneIndex].nav[n]=o,w(t),t))}catch(e){this.notification.error(u("_error"),e.message)}}moveThreeUp(n){try{if(n===0)return;let e=this.navs()[this.oneIndex].nav[this.twoIndex].nav[n],o=this.navs()[this.oneIndex].nav[this.twoIndex].nav[n-1];this.navs.update(t=>(t[this.oneIndex].nav[this.twoIndex].nav[n-1]=e,t[this.oneIndex].nav[this.twoIndex].nav[n]=o,w(t),t))}catch(e){this.notification.error(u("_error"),e.message)}}moveThreeDown(n){try{if(n===this.navs()[this.oneIndex].nav[this.twoIndex].nav.length-1)return;let e=this.navs()[this.oneIndex].nav[this.twoIndex].nav[n],o=this.navs()[this.oneIndex].nav[this.twoIndex].nav[n+1];this.navs.update(t=>(t[this.oneIndex].nav[this.twoIndex].nav[n+1]=e,t[this.oneIndex].nav[this.twoIndex].nav[n]=o,w(t),t))}catch(e){this.notification.error(u("_error"),e.message)}}moveWebUp(n){try{if(n===0)return;let e=this.navs()[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n],o=this.navs()[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n-1];this.navs.update(t=>(t[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n-1]=e,t[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n]=o,w(t),t))}catch(e){this.notification.error(u("_error"),e.message)}}moveWebDown(n){try{if(n===this.navs()[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav.length-1)return;let e=this.navs()[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n],o=this.navs()[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n+1];this.navs.update(t=>(t[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n+1]=e,t[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n]=o,w(t),t))}catch(e){this.notification.error(u("_error"),e.message)}}hanldeOneSelect(n){this.oneSelect=n,this.twoSelect=-1,this.threeSelect=-1,this.onTabChange()}hanldeTwoSelect(n){this.twoSelect=n,this.threeSelect=-1,this.onTabChange()}hanldeThreeSelect(n){this.threeSelect=n,this.onTabChange()}openCreateClass(){if(this.tabActive===0&&g.emit("EDIT_CLASS_OPEN"),this.tabActive===1&&this.oneSelect===-1)return this.message.error(u("_sel1"));if(this.tabActive===2&&this.twoSelect===-1)return this.message.error(u("_sel2"));let n=[-1,this.oneSelect,this.twoSelect];g.emit("EDIT_CLASS_OPEN",{id:n[this.tabActive]})}openEditClass(n){g.emit("EDIT_CLASS_OPEN",I({},n))}handleSync(){this.modal.info({nzTitle:u("_syncDataOut"),nzOkText:u("_confirmSync"),nzContent:u("_confirmSyncTip"),nzOnOk:()=>{this.syncLoading=!0,S({message:"update db",content:JSON.stringify(ie(JSON.parse(JSON.stringify(this.navs)))),path:D}).then(()=>{this.message.success(u("_syncSuccessTip"))}).finally(()=>{this.syncLoading=!1})}})}static \u0275fac=function(e){return new(e||s)(y(Ie),y(Te),y(we),y(ge))};static \u0275cmp=A({type:s,selectors:[["app-web"]],decls:11,vars:9,consts:[["rowSelectionTable","","basicTable",""],[1,"admin","mt-2.5"],["nz-button","","nzType","primary",3,"nzLoading","click",4,"ngIf"],["nz-button","","style","margin: 0 15px 20px 15px",3,"click",4,"ngIf"],["nz-button","",2,"margin-right","15px",3,"click"],["nz-button","","nz-tooltip","","nzTooltipPlacement","bottom",3,"nzTooltipTitle"],["type","file","name","file2","accept",".json",1,"file-upload",3,"change"],[1,"tip2"],[3,"nzSelectedIndex","nzSelectedIndexChange",4,"ngIf"],["nz-button","","nzType","primary",3,"click","nzLoading"],["nz-button","",2,"margin","0 15px 20px 15px",3,"click"],[3,"nzSelectedIndexChange","nzSelectedIndex"],[3,"nzTitle"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzDanger","",2,"margin-left","10px",3,"click","disabled"],[2,"margin-top","15px",3,"nzData","nzShowPagination"],["nzWidth","100px",3,"nzCheckedChange","nzChecked"],["nzWidth","200px"],["nzWidth","100px"],[4,"ngFor","ngForOf"],["nzShowSearch","",2,"width","260px",3,"ngModelChange","ngModel","nzPlaceHolder"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-button","","nzType","primary",2,"margin-left","20px",3,"click"],["nzShowSearch","",2,"width","200px",3,"ngModelChange","ngModel","nzPlaceHolder"],["nzShowSearch","",2,"width","200px","margin-left","15px",3,"ngModelChange","ngModel","nzPlaceHolder"],["nzShowSearch","",2,"width","150px",3,"ngModelChange","ngModel","nzPlaceHolder"],["nzShowSearch","",2,"width","150px","margin-left","15px",3,"ngModelChange","ngModel","nzPlaceHolder"],["nz-button","","nzType","primary",2,"margin-left","10px",3,"click"],["nz-button","","nzDanger","",2,"margin","0 10px",3,"click","disabled"],["nz-button","","nzType","primary","nzDanger","",3,"click"],["nzWidth","70px",3,"nzCheckedChange","nzChecked"],["nzWidth","60px",1,"text-center"],["nzWidth","70px"],["nzWidth","80px"],["nzWidth","120px"],["nzWidth","300px"],[3,"nzCheckedChange","nzChecked"],[1,"select-none"],[3,"click"],[1,"ml-2.5",3,"click"],[3,"src","name"],["nz-icon","","nzType","check","nzTheme","outline",4,"ngIf"],["nz-icon","","nzType","check","nzTheme","outline"],[3,"nzLabel","nzValue"],[1,"text-center","select-none"],[4,"ngIf"],["nz-icon","","nzType","close","nzTheme","outline","style","color: red",4,"ngIf"],[3,"src","name",4,"ngIf"],["target","_blank",3,"href"],[3,"data",4,"ngIf"],[1,"desc"],["nz-icon","","nzType","close","nzTheme","outline",2,"color","red"],[3,"data"]],template:function(e,o){e&1&&(a(0,"div",1),b(1,Je,2,2,"button",2)(2,je,2,1,"button",3),a(3,"button",4),d("click",function(){return o.handleDownloadBackup()}),_(4),r(),a(5,"button",5),_(6),a(7,"input",6),d("change",function(l){return o.handleUploadBackup(l)}),r()(),a(8,"div",7),_(9),r(),b(10,mt,111,77,"nz-tabset",8),r()),e&2&&(i(),c("ngIf",!o.isSelfDevelop),i(),c("ngIf",!o.isSelfDevelop),i(2),f(" ",o.$t("_backup")," "),i(),c("nzTooltipTitle",o.$t("_importBackupTip")),i(),f(" ",o.$t("_importBackup")," "),i(3),f(" ",o.$t("_errCountTip",L(7,Re,o.settings.errorUrlCount||0))," "),i(),c("ngIf",o.isLogin))},dependencies:[H,B,U,he,me,_e,se,ce,pe,de,le,re,oe,ae,ve,Ne,$e,ke,We,Ee,Me,De,Oe,Ve,Le,Fe,Ae,Ce,ue,xe,be,fe,J,R,Se,Pe,ye,ze],styles:[".desc[_ngcontent-%COMP%]{width:300px;white-space:pre-wrap;word-break:break-all}.file-upload[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.tip2[_ngcontent-%COMP%]{color:#f50;font-weight:700;margin-top:10px}.admin[_ngcontent-%COMP%]     .ant-table{max-height:600px;overflow:auto}"]})};export{N as default};
